<%- include('../includes/navbar') %>
<h2>Select a slot from <%= targetTeacher.username %> to swap with</h2>
<p>Initiator slot: <%= initiatorSlot.timeSlot %> — <%= initiatorSlot.classGroup %></p>
<p>Date: <%= new Date(date).toDateString() %></p>

<% if (candidateSlots.length === 0) { %>
  <p>No candidate slots available (or they conflict with your existing schedule).</p>
<% } else { %>
  <ul>
    <% candidateSlots.forEach(s => { %>
      <li>
        <%= s.day %> — <%= s.timeSlot %> — <%= s.classGroup %> — <%= s.subject %>
        <form style="display:inline" method="POST" action="/exchange/request/send">
          <input type="hidden" name="initiatingSlotId" value="<%= initiatorSlot._id %>" />
          <input type="hidden" name="receiverId" value="<%= targetTeacher._id %>" />
          <input type="hidden" name="date" value="<%= date %>" />
          <input type="hidden" name="type" value="swap" />
          <input type="hidden" name="targetSlotId" value="<%= s._id %>" />
          <button class="btn btn-sm">Request swap with this slot</button>
        </form>
      </li>
    <% }) %>
  </ul>
<% } %>

