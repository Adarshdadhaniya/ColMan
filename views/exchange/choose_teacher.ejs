<%- include('../includes/navbar') %>
<h2>Choose teacher to request exchange for slot: <%= initiatorSlot.timeSlot %> - <%= initiatorSlot.classGroup %></h2>
<p>Date: <%= new Date(date).toDateString() %></p>

<h3>Same classGroup — Free</h3>
<% if (sameGroup_free.length===0) { %> <p>— none —</p> <% } %>
<ul>
  <% sameGroup_free.forEach(t => { %>
    <li>
      <%= t.username %>
      <form style="display:inline" method="POST" action="/exchange/request/send">
        <input type="hidden" name="initiatingSlotId" value="<%= initiatorSlot._id %>" />
        <input type="hidden" name="receiverId" value="<%= t._id %>" />
        <input type="hidden" name="date" value="<%= date %>" />
        <input type="hidden" name="type" value="free" />
        <button class="btn btn-sm">Request</button>
      </form>
    </li>
  <% }) %>
</ul>

<h3>Same classGroup — Busy</h3>
<% if (sameGroup_busy.length===0) { %> <p>— none —</p> <% } %>
<ul>
  <% sameGroup_busy.forEach(item => { %>
    <li>
      <%= item.teacher.username %> — busy in <%= item.slot.timeSlot %>
      <a href="/exchange/busy-options?slotId=<%= initiatorSlot._id %>&targetTeacherId=<%= item.teacher._id %>&date=<%= date %>">Options</a>
    </li>
  <% }) %>
</ul>

<h3>Different classGroup — Free</h3>
<% if (diffGroup_free.length===0) { %> <p>— none —</p> <% } %>
<ul>
  <% diffGroup_free.forEach(t => { %>
    <li>
      <%= t.username %>
      <form style="display:inline" method="POST" action="/exchange/request/send">
        <input type="hidden" name="initiatingSlotId" value="<%= initiatorSlot._id %>" />
        <input type="hidden" name="receiverId" value="<%= t._id %>" />
        <input type="hidden" name="date" value="<%= date %>" />
        <input type="hidden" name="type" value="free" />
        <button class="btn btn-sm">Request</button>
      </form>
    </li>
  <% }) %>
</ul>

<h3>Different classGroup — Busy</h3>
<% if (diffGroup_busy.length===0) { %> <p>— none —</p> <% } %>
<ul>
  <% diffGroup_busy.forEach(item => { %>
    <li>
      <%= item.teacher.username %> — busy in <%= item.slot.timeSlot %>
      <a href="/exchange/busy-options?slotId=<%= initiatorSlot._id %>&targetTeacherId=<%= item.teacher._id %>&date=<%= date %>">Options</a>
    </li>
  <% }) %>
</ul>

